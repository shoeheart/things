// See: https://medium.com/actualize-network/sending-post-requests-in-rails-5-1-without-jquery-ff89f6f80487

// add newly added animal to end of current page list
$("<%= escape_javascript( render @animal ) %>").appendTo("#animals");

//debugger;

// re-fire the dashboard count updater
Rails.ajax({
  url: "<%= url_for( {controller: "animals", action: "totals"} ) %>",
  type: "PATCH",
  data: "jason",
  beforeSend: function(xhr, options){
    // from debugging, it appears you have to specify a beforeSend
    // that returns true if we want to call Rails.ajax directly
    // instead of via the data-* attributes on links/forms
    return true;
  },
  success: function(response, textStatus, xhr) {
    console.log(response);
  },
  error: function(response, textStatus, xhr) {
    console.log(response);
  },
});
